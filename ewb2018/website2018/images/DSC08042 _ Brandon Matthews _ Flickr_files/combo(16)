YUI.add("relationship-menu-view",function(i,e){var n=require("hermes-core/flog")(e);i.FlickrView.create(this.name,i.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(i){return this.nsid=i.nsid,this.pathAlias=i.pathAlias,this.disableRefreshOnRelationshipChange=i.disableRefreshOnRelationshipChange,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},loadState:function(){var i=this,e=i.nsid||{pathAlias:i.pathAlias};return i.appContext.getModel("person-relationship-models",e).then(function(e){i.relationship=e,i.nsid=i.nsid||e.id})},buildContainer:function(){return this.setContainerWithTemplate("following-dropdown",{isFriend:this.relationship.getValue("isFriend"),isFamily:this.relationship.getValue("isFamily"),isFluid:!0}),this},activate:function(){var i=this.get("container"),e=this;return this.relationship&&this.registerEventHandler(this.relationship.on("valuesChanged",function(){e.buildContainer()})),this.registerEventHandler(i.delegate("click",function(i){e.handleUnfollowClick(i)},".following-unfollow")),this.registerEventHandler(i.delegate("change",function(i){e.handleFriendChange(i)},".following-friend input")),this.registerEventHandler(i.delegate("change",function(i){e.handleFamilyChange(i)},".following-family input")),this},handleUnfollowClick:function(e){var t=this;e.preventDefault(),this.relationship.getValue("isContact")&&(this.relationship.registry.toggleFollowing(this.nsid),this.relationship.registry.remoteUpdate(this.nsid).then(function(){t.disableRefreshOnRelationshipChange||i.config.win.location.reload()},function(i){t.relationship.setValue("isContact",!0),t.buildContainer(),n.error({err:i})}),i.rapidTracker.beacon(this.name,"unfollowButtonClick"),this.fire("onUnfollow"))},handleFriendChange:function(e){var t=this;this.relationship.registry.toggleFriend(this.nsid),this.relationship.registry.remoteUpdate(this.nsid).then(function(){t.disableRefreshOnRelationshipChange||i.config.win.location.reload()},function(i){t.relationship.registry.toggleFriend(t.nsid),t.buildContainer(),t.onError(t.intlMessage({intlName:"person.RELATIONSHIP_FRIEND_ERROR"})),n.error({err:i})})},handleFamilyChange:function(e){var t=this;this.relationship.registry.toggleFamily(this.nsid),this.relationship.registry.remoteUpdate(this.nsid).then(function(){t.disableRefreshOnRelationshipChange||i.config.win.location.reload()},function(i){t.relationship.registry.toggleFamily(t.nsid),t.buildContainer(),t.onError(t.intlMessage({intlName:"person.RELATIONSHIP_FAMILY_ERROR"})),n.error({err:i})})}})},"@VERSION@",{requires:["promise","hermes-template-following-dropdown"],langBundles:["common","person"]});YUI.add("hermes-lang-person",function(o,e){o.Intl.add("hermes/person","en-US",{MESSAGE:["Message"],ALBUMS:["Albums"],FAVES:["Faves"],PROFILE:["Profile"],NO_PHOTOS:["This user has no photos visible to you."],NO_LONGER_ON_FLICKR:["This user is not found, or no longer on Flickr."],ERROR_LOADING:["Error loading user card. Please try again."],RELATIONSHIP_FRIEND_ERROR:["There was a problem setting your friend relationship."],RELATIONSHIP_FAMILY_ERROR:["There was a problem setting your family relationship."],SIGN_IN_BEFORE_FOLLOW_TITLE:["You found someone to follow!"],SIGN_IN_BEFORE_FOLLOW_MESSAGE:["That's awesome. Just sign in to follow them."],JOIN_FLICKR_AND_FOLLOW:["Join Flickr to never miss a post from ","${person}","."],SIGN_IN_AND_FOLLOW:["Sign in and follow"],CURATOR_PASS_OVER:["Pass over"],CURATOR_PASS_OVER_UNDO:["Undo pass over"]})},"@VERSION@",{requires:["intl"]});YUI.add("follow-view",function(e,i){var n=require("hermes-core/flog")(i);e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.set("isActiveViewAgnostic",e.isActiveViewAgnostic),this.nsid=e.nsid,this.pathAlias=e.pathAlias,this.realFullscreen=!!e.realFullscreen,this.isFluid=e.isFluid,this.isOnDark=e.isOnDark,this.disableRefreshOnRelationshipChange=e.disableRefreshOnRelationshipChange,this.isOnMobile=e.isOnMobile,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this.appContext.flipper.isFlipped("enable-signed-out-cta-test")&&(this.signedOutTest=!0),this},loadState:function(){var e=this,i=e.nsid||{pathAlias:e.pathAlias};return e.appContext.getModel("person-relationship-models",i).then(function(i){e.set("relationship",i),e.nsid=e.nsid||i.id})},buildContainer:function(){var e=this.get("relationship");return this.setContainerWithTemplate("follow",{showNoButton:e.getValue("isMe")||e.getValue("isIgnoredBy"),showUnblockButton:e.getValue("isIgnored"),showFollowingButton:e.getValue("isContact"),signedIn:this.appContext.getViewer().signedIn,isFluid:this.isFluid,isOnMobile:this.isOnMobile,isOnDark:this.isOnDark,followIntlKey:"common.FOLLOW",followingIntlKey:"common.FOLLOWING"}),this},activate:function(){var i,t,o=this,s=this.get("container"),l=this.get("relationship");return this.isFluid&&!l.getValue("isMe")?this.registerEventHandler(s.delegate("click",function(s){e.rapidTracker.beacon(this.name,"followButtonClick"),i=s.target.hasClass("follow")?s.target:s.target.ancestor(".follow"),o.appContext.getViewer().signedIn?l.getValue("isIgnored")?(l.registry.toggleIgnore(o.nsid),o.disableRefreshOnRelationshipChange?o.buildContainer():o.showBalls(),l.registry.remoteUpdate(o.nsid).then(function(){o.disableRefreshOnRelationshipChange||e.config.win.location.reload()},function(e){l.setValue("isIgnored",!0),o.buildContainer(),n.error({err:e})})):l.getValue("isContact")?(i.addClass("is-open"),t&&t.destroy(),(t=new e.Views.FluidDroparound({appContext:o.appContext,dismissOnOverlayClick:!0,showDropArrow:!0,width:140,height:130,observePageResize:!0,anchorOffsetHorizontal:6,anchorElement:i.one(".drop-icon"),subview:new e.Views["relationship-menu-view"]({nsid:o.nsid,pathAlias:o.pathAlias,disableRefreshOnRelationshipChange:o.disableRefreshOnRelationshipChange}),preferLeft:!0})).on("closeDroparound",function(){i.removeClass("is-open"),o.fire("subviewViewEvent","isClosed")}),t.show(),o.fire("subviewViewEvent","isOpen"),t.get("subview").on("onUnfollow",function(){t.close(),t.destroy(),o.disableRefreshOnRelationshipChange?o.buildContainer():o.showBalls()})):o.followPerson():o.signInAndRedirectToPerson()},"button.follow")):(s&&s.one("button")&&this.registerEventHandler(s.one("button").on("click",o.handleRelationshipClick,o)),this.get("relationship").getValue("isMe")||this.setupDropdown()),o},followPerson:function(){var i=this,t=this.get("relationship");t.getValue("isContact")||(t.registry.toggleFollowing(this.nsid),i.disableRefreshOnRelationshipChange?this.buildContainer():this.showBalls(),t.registry.remoteUpdate(this.nsid).then(function(){i.disableRefreshOnRelationshipChange||e.config.win.location.reload()},function(e){i.hideBalls(),t.setValue("isContact",!1),i.buildContainer(),n.error({err:e})}))},showBalls:function(){this.balls||(this.balls=e.Node.create(this.templates("flickr-balls")({}))),this.get("container").append(this.balls),this.balls.show(),this.get("container").one(".follow").hide()},hideBalls:function(){this.balls&&(this.balls.remove(),this.get("container").one(".follow").show())},handleRelationshipClick:function(i){var n=this;i.preventDefault(),e.rapidTracker.beacon(this.name,"followButtonClick");var t=this.get("relationship").getValue("isContact");this.appContext.getViewer().signedIn?!1===t?(this.followPerson(),e.rapidTracker.beacon(this.name,"photoAttributionFollowButtonClick")):n.isOnMobile?n.handleUnfollowClick(i):(n.relationshipDropDownDialog.toggle(),e.rapidTracker.beacon(this.name,"photoAttributionFollowMenuClick")):n.isOnMobile?e.use("mobile-actions-helper",function(e){e.MobileActionsHelper.redirectToAppOrStore({os:n.appContext.getUA().os,isWebview:n.appContext.getUA().isWebview,pageURL:"/photos/"+n.nsid,beacon:{name:"mpp_follow_signedout",section:"attribution-view"},viewName:n.name})}):n.signInAndRedirectToPerson()},handleFriendChange:function(i){var t=this;this.get("relationship").registry.toggleFriend(this.nsid),t.disableRefreshOnRelationshipChange||this.showBalls(),this.get("relationship").registry.remoteUpdate(this.nsid).then(function(){t.disableRefreshOnRelationshipChange||e.config.win.location.reload()},function(e){this.hideBalls(),this.get("relationship").registry.toggleFriend(this.nsid),i.target.set("checked",!i.target.get("checked")),this.onError(this.intlMessage({intlName:"person.RELATIONSHIP_FRIEND_ERROR"})),n.error({err:e})}.bind(this)),i.target.get("checked")?i.target.ancestor().addClass("checked"):i.target.ancestor().removeClass("checked")},handleFamilyChange:function(i){var t=this;this.get("relationship").registry.toggleFamily(this.nsid),t.disableRefreshOnRelationshipChange||this.showBalls(),this.get("relationship").registry.remoteUpdate(this.nsid).then(function(){t.disableRefreshOnRelationshipChange||e.config.win.location.reload()},function(e){this.hideBalls(),this.get("relationship").registry.toggleFamily(this.nsid),i.target.set("checked",!i.target.get("checked")),this.onError(this.intlMessage({intlName:"person.RELATIONSHIP_FAMILY_ERROR"})),n.error({err:e})}.bind(this)),i.target.get("checked")?i.target.ancestor().addClass("checked"):i.target.ancestor().removeClass("checked")},handleUnfollowClick:function(i){var t=this;i.preventDefault(),this.get("relationship").registry.toggleFollowing(this.nsid),t.disableRefreshOnRelationshipChange||this.showBalls(),this.isOnMobile||this.relationshipDropDownDialog.toggle(function(){this.toggleFollowingButton(i.target.ancestor(".relationship").one("button"),this.get("relationship").getValue("isContact"))}.bind(this)),this.get("relationship").registry.remoteUpdate(this.nsid).then(function(){t.disableRefreshOnRelationshipChange||e.config.win.location.reload()},function(e){this.hideBalls(),this.get("relationship").setValue("isContact",!0),this.toggleFollowingButton(i.target.ancestor("button"),!0),n.error({err:e})}.bind(this)),e.rapidTracker.beacon(this.name,"photoAttributionUnfollowButtonClick")},toggleFollowingButton:function(e,i){i?(e.setContent("<span>"+this.intlMessage({intlName:"common.FOLLOWING"})+"</span>"),e.addClass("follow-anim").addClass("is-following"),setTimeout(function(){e.removeClass("follow-anim")},500),e.addClass("ui-button-dropdown")):(e.addClass("unfollow-anim").removeClass("is-following"),setTimeout(function(){e.removeClass("unfollow-anim")},500),e.one("span").setContent(this.intlMessage({intlName:"common.FOLLOW"})),e.removeClass("ui-button-dropdown"))},onError:function(i){new e.Views.FluidModal({appContext:this.appContext,title:this.intlMessage({intlName:"common.ERROR"}),message:i,actionButtonLabel:this.intlMessage({intlName:"common.OK"}),showCancelButton:!1}).show()},setupDropdown:function(){var i,n,t=this,o=this.get("container"),s=o.one(".relationship"),l=o.one(".relationship button");s&&(n=this.templates("following-dropdown")({isFriend:this.get("relationship").getValue("isFriend"),isFamily:this.get("relationship").getValue("isFamily")}),e.use("dialog",function(){t.relationshipDropDownDialog=e.Views.dialog.getNewInstance("dialog-tooltip",{content:n,anchorTo:o.one(".relationship"),positioning:!1,parent:t}),t.registerEventHandler(t.relationshipDropDownDialog.on("hide",function(e){l.removeClass("is-open")})),t.registerEventHandler(t.relationshipDropDownDialog.on("show",function(e){l.addClass("is-open")})),t.relationshipDropDownDialog.render(),(i=t.relationshipDropDownDialog.get("container")).detach("click"),t.registerEventHandler(i.one(".following-unfollow").on("click",t.handleUnfollowClick,t)),t.registerEventHandler(i.one(".following-friend input").on("change",t.handleFriendChange,t)),t.registerEventHandler(i.one(".following-family input").on("change",t.handleFamilyChange,t))}))},showSignUpModal:function(){var i=this;this.appContext.getModel("person-models",this.nsid).then(function(n){var t,o=i.pathAlias?e.url("/photos/")+i.pathAlias:e.url("/photos/")+i.nsid,s=i.intlMessage({intlName:"person.JOIN_FLICKR_AND_FOLLOW",person:n.getValue("displayname")}),l=n.getValue("buddyicon");l.displayUrl=l.retina||l.large||l.medium||l.default,(t=new e.Views.SignUpModal({appContext:i.appContext,signUpHeaderClass:"avatar person large no-menu no-edit",signUpHeaderImage:l.displayUrl,signUpTitle:i.intlMessage({intlName:"person.SIGN_IN_BEFORE_FOLLOW_TITLE"}),signUpMessage:s,beaconPrefix:"follow"})).on("signUpClick",function(n){e.SigninHelper.signUpPendingFollow({id:i.nsid},{postLoginUrl:o})}),t.on("signInClick",function(n){e.SigninHelper.addPendingFollow({id:i.nsid},{postLoginUrl:o})}),t.show()})},signInAndRedirectToPerson:function(){var i,n=this,t=n.pathAlias?e.url("/photos/")+n.pathAlias:e.url("/photos/")+n.nsid,o=n.intlMessage({intlName:"person.SIGN_IN_BEFORE_FOLLOW_MESSAGE"}),s=n.intlMessage({intlName:"person.SIGN_IN_AND_FOLLOW"}),l=n.intlMessage({intlName:"common.CANCEL"});if(this.signedOutTest)return this.showSignUpModal();(i=new e.Views.FluidModal({appContext:n.appContext,title:n.intlMessage({intlName:"person.SIGN_IN_BEFORE_FOLLOW_TITLE"}),htmlMessage:o,actionButtonLabel:s,cancelButtonLabel:l})).on("actionClick",function(){e.rapidTracker.beacon(n.name,"followModalSigninClick"),e.SigninHelper.addPendingFollow({id:n.nsid},{postLoginUrl:t})}),i.on("cancelClick",function(i){e.rapidTracker.beacon(n.name,"followModalCancelClick")}),i.show()}})},"@VERSION@",{requires:["flickr-view","hermes-template-follow","promise","fluid-droparound-view","fluid-modal-view","signup-modal-view","hermes-template-following-dropdown","hermes-template-flickr-balls","relationship-menu-view","signin-helper"],optional:["person-models","person-relationship-models"],langBundles:["common","person"]});YUI.add("attribution-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,subviewConfig:{"follow-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return this.hideFollowView}}},initializer:function(e){return this.nsid=e.nsid,this.albumPhotoListLayoutStyle=e.albumPhotoListLayoutStyle,this.realFullscreen=!!e.realFullscreen,this.hideFollowView=!!e.hideFollowView&&e.hideFollowView,this.isAlbumView=e.isAlbumView,this},loadState:function(){var i=this;return e.Promise.all([i.appContext.getModel("person-models",i.nsid)]).then(function(e){i.set("owner",e[0])})},buildContainer:function(){var e,i=this.get("owner"),t=this.get("container"),l=i.getValue("pathAlias")||i.getValue("nsid");return"justified"===this.albumPhotoListLayoutStyle&&t.addClass("justified-album-details-page"),e=i.getValue("buddyicon").large?i.getValue("buddyicon").large:i.getValue("buddyicon").default,this.setContainerWithTemplate("attribution",{isPro:!!this.appContext.flipper.isFlipped("enable-pro-badge")&&i.getValue("isPro"),proBadge:!!this.appContext.flipper.isFlipped("enable-pro-badge")&&i.getValue("proBadge"),pathAlias:l,buddyicon:e,nsid:i.getValue("nsid"),displayname:i.getValue("displayname"),realFullscreenEnabled:this.realFullscreen&&this.appContext.experiments.fullscreen.getMode(),isAlbumView:this.isAlbumView}),this},activate:function(){return this}})},"@VERSION@",{requires:["flickr-view","hermes-template-attribution","promise","follow-view"],optional:["person-models"],langBundles:["attribution","common"]});YUI.add("album-header-view",function(e,t){var i=require("hermes-core/flog")(t),a={css:{headerContent:".album-header-content"}};e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.albumId=e.albumId,this.albumPhotoListLayoutStyle=e.albumPhotoListLayoutStyle,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},subviewConfig:{"album-title-desc-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"album-stats-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"album-engagement-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"attribution-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0,hideFollowView:!0,additionalViewClasses:["album-attribution"],isAlbumView:!0}},loadState:function(){var t=this,i=[];return i.push(this.appContext.getModel("set-models",this.albumId)),this.appContext.getViewer().signedIn&&i.push(this.appContext.getModel("person-preferences-models",this.appContext.getViewer().nsid)),e.Promise.all(i).then(function(e){t.set("albumModel",e[0]),e[1]&&t.set("personPreferenceModel",e[1])})},buildContainer:function(){var e,t=this.get("container"),a=this.getAlbumHeaderHeight()-60,n=this.get("albumModel"),o=this.appContext.getViewer().signedIn&&this.appContext.getViewer().nsid===n.getValue("owner").id,s=this.appContext.viewportData.getDevicePixelRatio();return"justified"===this.albumPhotoListLayoutStyle&&(t.addClass("justified-transitions"),t.addClass("justified"),a=300),(e=n.registry.getSizeToFit(this.albumId,{width:.8*this.appContext.viewportData.getWidth()*s,height:a*s}))||i.error("Failed to load album coverphoto."),this.setContainerWithTemplate("album-header",{height:a,"cover-photo-url":e?e.url:"",viewerIsOwner:o}),this},buildErrorContainer:function(){},activate:function(){var t,i=this,n=this.get("container"),o=n.one(".edit-cover-photo"),s=n.one(".album-header-content"),l=n.one(".avatar"),r=this.get("personPreferenceModel");if(this.albumHeaderElement=this.get("container").one(a.css.headerContent),this.registerEventHandler(e.globalEvents.subscribe("window:resize",this.resizeHeader.bind(this))),o&&this.registerEventHandler(o.on("click",this.handleSetCoverPhotoClick.bind(this))),this.appContext.flipper.isFlipped("enable-change-album-sorting")){var d=this.get("container").one(".change-album-sorting");d&&this.registerEventHandler(d.on("click",this.handleChangeAlbumSorting.bind(this)))}e.on("albumToolbarView:layoutChange",function(a){r&&(r.setValues({albumViewLayoutPref:a}),r.remoteUpdate()),"justified"===a?(n.addClass("justified-transitions"),n.addClass("justified"),s.setStyle("height",300),l&&e.flutil.onTransitionEnd(l,function(){n.one(".album-attribution").addClass("justified-album-details-page")})):(t=i.getAlbumHeaderHeight()-60+"px",s.setStyle("height",t),n.removeClass("justified"),l&&setTimeout(function(){n.one(".album-attribution").removeClass("justified-album-details-page")},250),e.flutil.onTransitionEnd(s,function(){n.removeClass("justified-transitions")}))})},onSubviewEvent:function(e,t){var i=this.get("container"),a=i.one(".album-header-content"),n=i.one(".edit-cover-photo");return"album-title-desc-view"===e&&"albumTitleDesc:editing"===t[0]?(this.fire("parentViewEvent","albumHeaderView:editing"),n.addClass("hidden"),!1):"album-title-desc-view"===e&&"albumTitleDesc:doneEditing"===t[0]?(this.fire("parentViewEvent","albumHeaderView:doneEditing"),n.removeClass("hidden"),!1):void("album-title-desc-view"===e&&"albumTitleDescEditing:heightChange"===t[0]&&t[1]&&a.setStyle("height",parseInt(a.getComputedStyle("height"),10)+t[1]+"px"))},resizeHeader:function(e){var t=this.getAlbumHeaderHeight()-60;this.get("container").hasClass("justified")||this.albumHeaderElement.setStyle("height",t)},getAlbumHeaderHeight:function(){var e,t=this.appContext.viewportData.getWidth(),i=this.appContext.viewportData.getHeight()-50,a=t/2.3+120,n=t/2.75;return e=i>t/1.3+120?t/1.3:i>a?i-120:i>n?i-120+120*(i-a)/(n-a):i,Math.max(480,Math.round(e))},handleChangeAlbumSorting:function(t){if(this.appContext.flipper.isFlipped("enable-change-album-sorting")){t.halt();var i=this;this.sortingOptionsDialog=new e.Views.FluidDroparound({appContext:this.appContext,showDropArrow:!0,observePageResize:!0,anchorElement:t.target,minVerticalSpace:250,positionFixed:!0,anchorOffsetHorizontal:14,menuItems:[{text:this.intlMessage({intlName:"album-page.SORT_DATE_TAKEN_NEWEST"}),value:"date-posted-asc"},{text:this.intlMessage({intlName:"album-page.SORT_DATE_TAKEN_OLDEST"}),value:"date-posted-desc"},{text:this.intlMessage({intlName:"album-page.SORT_DATE_UPLOADED_OLDEST"}),value:"date-taken-asc"},{text:this.intlMessage({intlName:"album-page.SORT_DATE_UPLOADED_NEWEST"}),value:"date-taken-desc"},{text:this.intlMessage({intlName:"album-page.SORT_ALPHABETICALLY"}),value:"title"},{text:this.intlMessage({intlName:"album-page.SORT_RANDOMLY"}),value:"random"},{text:this.intlMessage({intlName:"album-page.SORT_REVERSE"}),value:"reverse"}]}),this.registerEventHandler(this.sortingOptionsDialog.on("selected",function(t){if(t.preventDefault(),i.sortingOptionsDialog.close(),t.menuItem&&t.menuItem.value){var a={photoset_id:i.get("albumModel").getValue("id"),sort:t.menuItem.value,preview:0};i.loadingModal=new e.Views.FluidModal({appContext:this.appContext,title:i.intlMessage({intlName:"common.LOADING"}),message:i.intlMessage({intlName:"album-page.SORT_ALMOST_DONE"}),showButtons:!1}),i.loadingModal.show(),i.appContext.callAPI("flickr.photosets.sortPhotos",a).then(i.onAlbumSortingChanged.bind(i)).catch(i.onAlbumSortingFailed.bind(i))}})),this.sortingOptionsDialog.show()}},onAlbumSortingChanged:function(t){"ok"===t.stat?e.config.win.location.reload():this.onAlbumSortingFailed(t)},onAlbumSortingFailed:function(t){if("fail"===t.stat){new e.Views.FluidModal({appContext:this.appContext,title:this.intlMessage({intlName:"common.ERROR"}),message:"Error while changing sort",actionButtonLabel:this.intlMessage({intlName:"common.OK"}),showCancelButton:!1}).show()}},handleSetCoverPhotoClick:function(t){t.preventDefault();var i,a,n,o=this.get("container"),s=this,l=this.get("albumModel"),r=this.templates("flickr-balls")({}),d=o.one(".edit-cover-photo"),h=this.appContext.viewportData.getDevicePixelRatio(),u=[{id:"photostream",name:this.intlMessage({intlName:"common.PHOTOSTREAM"}),value:"photostream"},{id:"sets",name:this.intlMessage({intlName:"common.ALBUMS"}),value:"sets",selected:!0},{id:"upload",name:this.intlMessage({intlName:"global-nav.UPLOAD"}),value:"upload"}],m=[{id:"photostream",name:this.intlMessage({intlName:"common.PHOTOSTREAM"}),value:"photostream"},{id:"sets",name:this.intlMessage({intlName:"common.ALBUMS"}),value:"sets",selected:!0}];(i=new e.Views.FluidModal({appContext:s.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,showBodyLines:!0,showCancelButton:!1,showCancelX:!0,title:"",navBarView:new e.Views["fluid-modal-nav-bar-view"]({appContext:s.appContext,links:[{id:"photostream",name:this.intlMessage({intlName:"common.PHOTOSTREAM"}),value:"photostream"},{id:"sets",name:this.intlMessage({intlName:"common.ALBUMS"}),value:"sets",selected:!0},{id:"upload",name:this.intlMessage({intlName:"global-nav.UPLOAD"}),value:"upload"}],enableSearch:!0,breakpointConfig:[{maxWidth:700,links:u,enableSearch:!1},{maxWidth:500,links:m,enableSearch:!1}]}),actionButtonLabel:this.intlMessage({intlName:"common.SELECT"}),actionButtonDisabled:!0,subview:new e.Views["photo-selector-view"]({appContext:this.appContext,searchable:{yours:!0,contacts:!1,everyone:!1,marketplace:!1},defaultSelected:{id:s.albumId,title:s.get("albumModel").getValue("title"),type:"set"}}),width:752,height:498,fullWindow:!0,classList:"photo-selector",hideModalOverlay:!1})).on("actionClick",function(t){d.replace(r);var u=i.get("subview").get("selected");this.appContext.getModel("photo-models",u).then(function(e){return(n=!1===l.hasPhoto(u)?l.registry.remote.addPhoto({setID:s.albumId,photoID:u},s.appContext).then(function(){return s.fire("subviewViewEvent","newPhotoAddedToAlbum",u),l.registry.remote.setPrimaryPhoto({photoId:u,albumId:s.albumId},s.appContext)}):l.registry.remote.setPrimaryPhoto({photoId:u,albumId:s.albumId},s.appContext)).then(function(t){a=e.getSizeToFit({width:.8*s.appContext.viewportData.getWidth()*h,height:(s.getAlbumHeaderHeight()-60)*h}),l.setValue("primary",e.id),l.setValue("primaryPhotoSizes",e.getValue("sizesForAlbum")),l.setValue("primaryNeedsInterstitial",e.getValue("needsInterstitial")),a&&o.one(".album-header-content").setStyle("background-image","url("+a.url+")"),o.one(".balls").replace(d)})}).then(null,function(t){new e.Views.FluidModal({title:s.intlMessage({intlName:"common.ERROR"}),actionButtonLabel:s.intlMessage({intlName:"common.OK"}),textMessage:s.intlMessage({intlName:"album-page.ERROR_COVER_PHOTO"}),appContext:s.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,actionButtonDisabled:!1,showCancelButton:!1,hideModalOverlay:!1,showCancelX:!0}).show(),o.one(".balls").replace(d)})}),i.registerEventHandler(e.on("photoSelector:selected",function(e){i.enableActionButton()})),i.registerEventHandler(e.on("photoSelector:unselected",function(e){i.disableActionButton()})),e.rapidTracker.beacon(s.name,"albumCoverPhotoEdit"),i.show()}})},"@VERSION@",{requires:["flickr-view","hermes-template-album-header","hermes-template-flickr-balls"],optional:["album-title-desc-view","album-stats-view","album-engagement-view","photo-selector-view","fluid-modal-nav-bar-view","photo-list-photo-interaction-view","attribution-view"],langBundles:["album-page","global-nav","common"]});YUI.add("hermes-lang-global-nav",function(o,e){o.Intl.add("hermes/global-nav","en-US",{FLICKR_LOGO_ALT:["Flickr logo. If you click it, you'll go home"],YOUR_PHOTOSTREAM:["Your Photostream"],FOLLOWING:["Following"],PHOTOS_OF:["Photos of"],PHOTOS_FROM:["Photos from"],LIST:["List"],COMMUNITIES:["Communities"],GROUPS_LIST:["Groups List"],SEARCH_GROUPS:["Search Groups"],RECENT_DISCUSSIONS:["Recent Discussions"],CREATE_A_GROUP:["Create a Group"],RECENT_PHOTOS:["Recent Photos"],THE_COMMONS:["The Commons"],GETTY_COLLECTION:["Getty Collection"],GALLERIES:["Galleries"],FLICKR_GALLERIES:["Flickr Galleries"],WORLD_MAP:["World Map"],APP_GARDEN:["App Garden"],THE_WEEKLY_FLICKR:["The Weekly Flickr"],FLICKR_BLOG:["Flickr Blog"],UPLOAD:["Upload"],SIGN_IN:["Sign In"],SEARCH:["Search"],CAMERA_FINDER:["Camera Finder"],RECENT_ACTIVITY:["Recent Activity"],STATS:["Stats"],ORGANIZE:["Organize"],CREATIONS:["Creations"],FIND_FRIENDS:["Find Friends"],GROUPS:["Groups"],PEOPLE:["People"],CAMERAROLL:["Camera Roll"],CREATE:["Create"],CREATE_NEW:["New Creation"],CREATE_MY_WALLART:["My Wall Art"],CREATE_MY_PHOTOS_BOOKS:["My Photo Books"],CREATE_ORDER_HISTORY:["My Order History"],UPLOAD_MODAL_SIGNUP_TITLE:["Upload your photos securely and privately!"],UPLOAD_MODAL_SIGNUP_MESSAGE:["Join Flickr to unlock 1,000GB of free photo storage."],HOME:["Home"],LOG_IN:["Log In"]})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-google-analytics",function(e,a){var n=e.Template.Handlebars.revive({1:function(e,a,n,l,s){var i,t,r=null!=a?a:{},c=n.helperMissing,p=e.escapeExpression;return'<script nonce="'+p("function"==typeof(t=null!=(t=n.cspNonce||(null!=a?a.cspNonce:a))?t:c)?t.call(r,{name:"cspNonce",hash:{},data:s}):t)+'">window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;<\/script>\n<script nonce="'+p("function"==typeof(t=null!=(t=n.cspNonce||(null!=a?a.cspNonce:a))?t:c)?t.call(r,{name:"cspNonce",hash:{},data:s}):t)+"\" async src='https://www.google-analytics.com/analytics"+(null!=(i=(n.isFlipped||a&&a.isFlipped||c).call(r,"enable-google-analytics-debugging",{name:"isFlipped",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?i:"")+".js'><\/script>\n"},2:function(e,a,n,l,s){return"_debug"},compiler:[7,">= 4.0.0"],main:function(e,a,n,l,s){var i;return null!=(i=(n.isFlipped||a&&a.isFlipped||n.helperMissing).call(null!=a?a:{},"enable-google-analytics",{name:"isFlipped",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?i:""},useData:!0}),l={};e.Array.each([],function(a){var n=e.Template.get("hermes/"+a);n&&(l[a]=n)}),e.Template.register("hermes/google-analytics",function(a,s){return s=s||{},s.partials=s.partials?e.merge(l,s.partials):l,n(a,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-facebook-pixel",function(e,n){var t=e.Template.Handlebars.revive({1:function(e,n,t,a,s){var i;return'\x3c!-- Facebook Pixel Code --\x3e\n<script nonce="'+e.escapeExpression("function"==typeof(i=null!=(i=t.cspNonce||(null!=n?n.cspNonce:n))?i:t.helperMissing)?i.call(null!=n?n:{},{name:"cspNonce",hash:{},data:s}):i)+"\">\n  !function(f,b,e,v,n,t,s)\n  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?\n  n.callMethod.apply(n,arguments):n.queue.push(arguments)};\n  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';\n  n.queue=[];t=b.createElement(e);t.async=!0;\n  t.src=v;s=b.getElementsByTagName(e)[0];\n  s.parentNode.insertBefore(t,s)}(window, document,'script',\n  'https://connect.facebook.net/en_US/fbevents.js');\n  fbq('init', '1049934251710414');\n<\/script>\n<noscript>\n  <img height=\"1\" width=\"1\" style=\"display:none\"\n       src=\"https://www.facebook.com/tr?id=1049934251710414&ev=PageView&noscript=1\"/>\n</noscript>\n\x3c!-- End Facebook Pixel Code --\x3e\n"},compiler:[7,">= 4.0.0"],main:function(e,n,t,a,s){var i;return null!=(i=(t.isFlipped||n&&n.isFlipped||t.helperMissing).call(null!=n?n:{},"enable-facebook-pixel",{name:"isFlipped",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?i:""},useData:!0}),a={};e.Array.each([],function(n){var t=e.Template.get("hermes/"+n);t&&(a[n]=t)}),e.Template.register("hermes/facebook-pixel",function(n,s){return s=s||{},s.partials=s.partials?e.merge(a,s.partials):a,t(n,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-adobe-analytics",function(e,a){var n=e.Template.Handlebars.revive({1:function(e,a,n,l,s){var r,t=null!=a?a:{},i=n.helperMissing,c=e.escapeExpression;return'<script nonce="'+c("function"==typeof(r=null!=(r=n.cspNonce||(null!=a?a.cspNonce:a))?r:i)?r.call(t,{name:"cspNonce",hash:{},data:s}):r)+'" src="'+c("function"==typeof(r=null!=(r=n.adobeAnalyticsUrl||(null!=a?a.adobeAnalyticsUrl:a))?r:i)?r.call(t,{name:"adobeAnalyticsUrl",hash:{},data:s}):r)+'" async><\/script>\n'},compiler:[7,">= 4.0.0"],main:function(e,a,n,l,s){var r;return null!=(r=(n.isFlipped||a&&a.isFlipped||n.helperMissing).call(null!=a?a:{},"enable-adobe-analytics",{name:"isFlipped",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?r:""},useData:!0}),l={};e.Array.each([],function(a){var n=e.Template.get("hermes/"+a);n&&(l[a]=n)}),e.Template.register("hermes/adobe-analytics",function(a,s){return s=s||{},s.partials=s.partials?e.merge(l,s.partials):l,n(a,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-google-tag-manager",function(e,a){var n=e.Template.Handlebars.revive({1:function(e,a,n,t,l){var r,s=null!=a?a:{},i=n.helperMissing,o=e.escapeExpression;return'<script nonce="'+o("function"==typeof(r=null!=(r=n.cspNonce||(null!=a?a.cspNonce:a))?r:i)?r.call(s,{name:"cspNonce",hash:{},data:l}):r)+"\">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.nonce='"+o("function"==typeof(r=null!=(r=n.cspNonce||(null!=a?a.cspNonce:a))?r:i)?r.call(s,{name:"cspNonce",hash:{},data:l}):r)+"';j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-WS6KDNW');<\/script>\n<noscript><iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-WS6KDNW\" height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>\n"},compiler:[7,">= 4.0.0"],main:function(e,a,n,t,l){var r;return null!=(r=(n.isFlipped||a&&a.isFlipped||n.helperMissing).call(null!=a?a:{},"enable-google-tag-manager",{name:"isFlipped",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l}))?r:""},useData:!0}),t={};e.Array.each([],function(a){var n=e.Template.get("hermes/"+a);n&&(t[a]=n)}),e.Template.register("hermes/google-tag-manager",function(a,l){return l=l||{},l.partials=l.partials?e.merge(t,l.partials):t,n(a,l)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-footer-full",function(e,t){var a=e.Template.Handlebars.revive({1:function(e,t,a,l,n){var s,o=null!=t?t:{};return'\t\t<div class="foot-top-row">\n\t\t\t<ul class="foot-nav-ul">\n'+(null!=(s=a.if.call(o,null!=(s=null!=t?t.elements:t)?s.top_about:s,{name:"if",hash:{},fn:e.program(2,n,0),inverse:e.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=t?t.elements:t)?s.top_jobs:s,{name:"if",hash:{},fn:e.program(4,n,0),inverse:e.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=t?t.elements:t)?s.top_blog:s,{name:"if",hash:{},fn:e.program(6,n,0),inverse:e.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=t?t.elements:t)?s.top_developers:s,{name:"if",hash:{},fn:e.program(8,n,0),inverse:e.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=t?t.elements:t)?s.top_guidelines:s,{name:"if",hash:{},fn:e.program(10,n,0),inverse:e.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=t?t.elements:t)?s.top_privacy:s,{name:"if",hash:{},fn:e.program(12,n,0),inverse:e.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=t?t.elements:t)?s.top_terms:s,{name:"if",hash:{},fn:e.program(14,n,0),inverse:e.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=t?t.elements:t)?s.top_help:s,{name:"if",hash:{},fn:e.program(16,n,0),inverse:e.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=t?t.elements:t)?s.top_report_abuse:s,{name:"if",hash:{},fn:e.program(18,n,0),inverse:e.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=t?t.elements:t)?s.top_help_forum:s,{name:"if",hash:{},fn:e.program(20,n,0),inverse:e.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=t?t.elements:t)?s.top_language:s,{name:"if",hash:{},fn:e.program(22,n,0),inverse:e.noop,data:n}))?s:"")+"\t\t\t</ul>\n\t\t</div>\n"},2:function(e,t,a,l,n){return'\t\t\t\t<li class="foot-li"><a href="/about" data-track="footer-about">'+e.escapeExpression((a.intlMessage||t&&t.intlMessage||a.helperMissing).call(null!=t?t:{},{name:"intlMessage",hash:{intlName:"common.ABOUT"},data:n}))+"</a></li>\n"},4:function(e,t,a,l,n){return'\t\t\t\t<li class="foot-li"><a href="/jobs" data-track="footer-jobs">'+e.escapeExpression((a.intlMessage||t&&t.intlMessage||a.helperMissing).call(null!=t?t:{},{name:"intlMessage",hash:{intlName:"common.JOBS"},data:n}))+"</a></li>\n"},6:function(e,t,a,l,n){return'\t\t\t\t<li class="foot-li"><a href="//blog.flickr.net/en" data-track="footer-blog">'+e.escapeExpression((a.intlMessage||t&&t.intlMessage||a.helperMissing).call(null!=t?t:{},{name:"intlMessage",hash:{intlName:"common.BLOG"},data:n}))+"</a></li>\n"},8:function(e,t,a,l,n){return'\t\t\t\t<li class="foot-li"><a href="/services/developer" data-track="footer-developers">'+e.escapeExpression((a.intlMessage||t&&t.intlMessage||a.helperMissing).call(null!=t?t:{},{name:"intlMessage",hash:{intlName:"common.DEVELOPERS"},data:n}))+"</a></li>\n"},10:function(e,t,a,l,n){return'\t\t\t\t<li class="foot-li"><a href="/help/guidelines" data-track="footer-guidelines">'+e.escapeExpression((a.intlMessage||t&&t.intlMessage||a.helperMissing).call(null!=t?t:{},{name:"intlMessage",hash:{intlName:"common.GUIDELINES"},data:n}))+"</a></li>\n"},12:function(e,t,a,l,n){return'\t\t\t\t<li class="foot-li"><a href="/help/privacy" data-track="footer-privacy">'+e.escapeExpression((a.intlMessage||t&&t.intlMessage||a.helperMissing).call(null!=t?t:{},{name:"intlMessage",hash:{intlName:"common.PRIVACY"},data:n}))+"</a></li>\n"},14:function(e,t,a,l,n){return'\t\t\t\t<li class="foot-li"><a href="/help/terms" data-track="footer-terms">'+e.escapeExpression((a.intlMessage||t&&t.intlMessage||a.helperMissing).call(null!=t?t:{},{name:"intlMessage",hash:{intlName:"common.TERMS"},data:n}))+"</a></li>\n"},16:function(e,t,a,l,n){return'\t\t\t\t<li class="foot-li"><a href="//help.flickr.com" data-track="footer-help">'+e.escapeExpression((a.intlMessage||t&&t.intlMessage||a.helperMissing).call(null!=t?t:{},{name:"intlMessage",hash:{intlName:"common.HELP"},data:n}))+"</a></li>\n"},18:function(e,t,a,l,n){return'\t\t\t\t<li class="foot-li"><a href="/abuse" data-track="footer-abuse">'+e.escapeExpression((a.intlMessage||t&&t.intlMessage||a.helperMissing).call(null!=t?t:{},{name:"intlMessage",hash:{intlName:"common.REPORT_ABUSE"},data:n}))+"</a></li>\n"},20:function(e,t,a,l,n){return'\t\t\t\t<li class="foot-li"><a href="/help/forum" data-track="footer-forum">'+e.escapeExpression((a.intlMessage||t&&t.intlMessage||a.helperMissing).call(null!=t?t:{},{name:"intlMessage",hash:{intlName:"common.HELP_FORUM"},data:n}))+"</a></li>\n"},22:function(e,t,a,l,n){var s,o=e.lambda,i=e.escapeExpression;return'\t\t\t\t<li class="foot-li lang-switcher">\n\t\t\t\t\t<a href="/change_language.gne?lang='+i(o(null!=(s=null!=t?t.selectedLang:t)?s.code:s,t))+"&csrf="+i(o(null!=(s=null!=t?t.selectedLang:t)?s.csrf:s,t))+'" data-track="footer-language">'+i(o(null!=(s=null!=t?t.selectedLang:t)?s.name:s,t))+'</a>\n\t\t\t\t\t<span class="arrow"></span>\n\t\t\t\t</li>\n'},24:function(e,t,a,l,n){var s,o=null!=t?t:{},i=a.helperMissing;return'\t\t<div class="foot-bottom-row">\n\t\t\t<div class="foot-yahoo '+(null!=(s=(a.isFlipped||t&&t.isFlipped||i).call(o,"relocate-footer-help-button",{name:"isFlipped",hash:{},fn:e.program(25,n,0),inverse:e.noop,data:n}))?s:"")+'">\n\t\t\t\t<ul class="foot-nav-ul">\n'+(null!=(s=a.if.call(o,null!=(s=null!=t?t.elements:t)?s.bottom_privacy:s,{name:"if",hash:{},fn:e.program(27,n,0),inverse:e.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=t?t.elements:t)?s.bottom_terms:s,{name:"if",hash:{},fn:e.program(29,n,0),inverse:e.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=t?t.elements:t)?s.bottom_help:s,{name:"if",hash:{},fn:e.program(32,n,0),inverse:e.noop,data:n}))?s:"")+'\t\t\t\t</ul>\n\t\t\t</div>\n\n\t\t\t<div class="foot-company '+(null!=(s=(a.isFlipped||t&&t.isFlipped||i).call(o,"relocate-footer-help-button",{name:"isFlipped",hash:{},fn:e.program(34,n,0),inverse:e.noop,data:n}))?s:"")+'">\n'+(null!=(s=a.if.call(o,null!=(s=null!=t?t.elements:t)?s.bottom_yahoo_company:s,{name:"if",hash:{},fn:e.program(36,n,0),inverse:e.program(38,n,0),data:n}))?s:"")+'\t\t\t</div>\n\n\t\t\t<div class="foot-social">\n\t\t\t\t<ul class="foot-nav-ul">\n'+(null!=(s=a.if.call(o,null!=(s=null!=t?t.elements:t)?s.bottom_tumblr:s,{name:"if",hash:{},fn:e.program(40,n,0),inverse:e.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=t?t.elements:t)?s.bottom_facebook:s,{name:"if",hash:{},fn:e.program(42,n,0),inverse:e.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=t?t.elements:t)?s.bottom_twitter:s,{name:"if",hash:{},fn:e.program(44,n,0),inverse:e.noop,data:n}))?s:"")+"\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n"},25:function(e,t,a,l,n){return" relocate-footer-help-foot-yahoo"},27:function(e,t,a,l,n){return'\t\t\t\t\t<li class="foot-li"><a href="/help/privacy" data-track="footer-privacy">'+e.escapeExpression((a.intlMessage||t&&t.intlMessage||a.helperMissing).call(null!=t?t:{},{name:"intlMessage",hash:{intlName:"common.PRIVACY"},data:n}))+"</a></li>\n"},29:function(e,t,a,l,n){var s,o=null!=t?t:{};return'\t\t\t\t\t<li class="foot-li"><a href="/help/terms" data-track="footer-terms"'+(null!=(s=a.if.call(o,null!=t?t.highlightTerms:t,{name:"if",hash:{},fn:e.program(30,n,0),inverse:e.noop,data:n}))?s:"")+">"+e.escapeExpression((a.intlMessage||t&&t.intlMessage||a.helperMissing).call(o,{name:"intlMessage",hash:{intlName:"common.TERMS"},data:n}))+"</a></li>\n"},30:function(e,t,a,l,n){return' class="highlighted"'},32:function(e,t,a,l,n){return'\t\t\t\t\t<li class="foot-li"><a href="//help.flickr.com" data-track="footer-help">'+e.escapeExpression((a.intlMessage||t&&t.intlMessage||a.helperMissing).call(null!=t?t:{},{name:"intlMessage",hash:{intlName:"common.HELP"},data:n}))+"</a></li>\n"},34:function(e,t,a,l,n){return" relocate-footer-help-foot-company"},36:function(e,t,a,l,n){return"\t\t\t\t\t"+e.escapeExpression((a.intlHTMLMessage||t&&t.intlHTMLMessage||a.helperMissing).call(null!=t?t:{},{name:"intlHTMLMessage",hash:{intlName:"common.A_YAHOO_COMPANY_WITH_LINK"},data:n}))+"\n"},38:function(e,t,a,l,n){return"\t\t\t\t\t&nbsp;\n"},40:function(e,t,a,l,n){return'\t\t\t\t\t<li><a target="_blank" href="http://flickr.tumblr.com/" aria-label="Tumblr" data-track="footer-tumblr">\n\t\t\t\t\t\t<svg class="ft-icon ft-tumblr"><use xlink:href="#icon-tumblr"></use></svg>\n\t\t\t\t\t</a></li>\n'},42:function(e,t,a,l,n){return'\t\t\t\t\t<li><a target="_blank" href="https://www.facebook.com/flickr" aria-label="Facebook" data-track="footer-facebook">\n\t\t\t\t\t\t<svg class="ft-icon ft-facebook"><use xlink:href="#icon-facebook"></use></svg>\n\t\t\t\t\t</a></li>\n'},44:function(e,t,a,l,n){return'\t\t\t\t\t<li><a target="_blank" href="https://twitter.com/flickr" aria-label="Twitter" data-track="footer-twitter">\n\t\t\t\t\t\t<svg class="ft-icon ft-twitter"><use xlink:href="#icon-twitter"></use></svg>\n\t\t\t\t\t</a></li>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,a,l,n){var s,o=null!=t?t:{};return'<footer class="foot">\n\t<div class="foot-container" role="contentinfo">\n'+(null!=(s=a.if.call(o,null!=(s=null!=t?t.elements:t)?s.top_row:s,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?s:"")+(null!=(s=a.if.call(o,null!=(s=null!=t?t.elements:t)?s.bottom_row:s,{name:"if",hash:{},fn:e.program(24,n,0),inverse:e.noop,data:n}))?s:"")+'\t</div>\n</footer>\n\n<span id="tgt"><div id="tgtRS"></div></span>\n\n'+(null!=(s=e.invokePartial(l["google-analytics"],t,{name:"google-analytics",data:n,helpers:a,partials:l,decorators:e.decorators}))?s:"")+(null!=(s=e.invokePartial(l["facebook-pixel"],t,{name:"facebook-pixel",data:n,helpers:a,partials:l,decorators:e.decorators}))?s:"")+(null!=(s=e.invokePartial(l["adobe-analytics"],t,{name:"adobe-analytics",data:n,helpers:a,partials:l,decorators:e.decorators}))?s:"")+(null!=(s=e.invokePartial(l["google-tag-manager"],t,{name:"google-tag-manager",data:n,helpers:a,partials:l,decorators:e.decorators}))?s:"")},usePartial:!0,useData:!0}),l={};e.Array.each(["google-analytics","facebook-pixel","adobe-analytics","google-tag-manager"],function(t){var a=e.Template.get("hermes/"+t);a&&(l[t]=a)}),e.Template.register("hermes/footer-full",function(t,n){return n=n||{},n.partials=n.partials?e.merge(l,n.partials):l,a(t,n)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-google-analytics","hermes-template-facebook-pixel","hermes-template-adobe-analytics","hermes-template-google-tag-manager"]});YUI.add("dropdown",function(e){"use strict";var t;t={css:{closed:"ui-dropdown-closed",shim:"ui-dropdown-shim",label:'span[data-action="toggle"]',items:"[data-value]",itemSelected:"ui-dropdown-item-selected",hasDialogArrow:"ui-dropdown-has-dialog-arrow",dialogArrow:"ui-dialog-arrow",useCheckMarks:"ui-dropdown-use-checkboxes"},options:{hasDialogArrow:!1,useCheckMarks:!1}},e.namespace("Views").Dropdown=e.Base.create("Dropdown",e.FlickrView,[],{initializer:function(e){!1!==e.activate&&this.activate()},activate:function(){var s,i=this,a=this.get("container");if(this.close(),this._items={},e.Lang.isArray(this.get("selected"))||this.set("selected",[this.get("selected")]),a.all(t.css.items).each(function(e){var t=e.getData();i._items[t.value]={text:t.text||'no data-text for "'+t.value+'"',sub:t.sub,node:e}}),this.labelEl=a.one(t.css.label),this.labelEl||(this.labelEl=e.Node.create('<span class="truncate" data-action="toggle" tabindex="0" aria-haspopup="true" aria-expanded="false" />'),a.insert(this.labelEl,0)),(s=this.get("staticLabel")||this.get("defaultLabel"))&&(!0===s?this.labelEl.set("text","set staticLabel/defaultLabel to a string, not `true`"):this.labelEl.set("text",s)),this.get("hasDialogArrow")&&!a.hasClass(t.css.hasDialogArrow)&&a.addClass(t.css.hasDialogArrow),a.hasClass(t.css.hasDialogArrow)&&(this.dialogArrowEl=a.one(t.css.dialogArrow),this.dialogArrowEl||(this.dialogArrowEl=e.Node.create('<span class="ui-dialog-arrow" />'),a.insert(this.dialogArrowEl,1))),this.get("useCheckMarks")&&!a.hasClass(t.css.useCheckMarks)&&a.addClass(t.css.useCheckMarks),this.select(),this.get("disabled"))return this.disable();this.attachEvents({":toggle":this.toggle.bind(this),":set":this.setData.bind(this)}),this.registerEventHandler(this.labelEl.on("key",this.toggle,"down:13",this)),this.registerEventHandler(this.labelEl.on("key",this.enterDropdown,"down:40",this));var l=this.labelEl.next("ul");l&&(this.registerEventHandler(l.on("keydown",this.keyboardNavigation,this)),this.registerEventHandler(l.delegate("key",function(e){document.activeElement.dataset&&this.setData(e,document.activeElement.dataset)},"down:13","li",this)))},setData:function(t,s){if(t.halt(),!this.get("multiSelect")&&!this.get("multiSelectSub")&&e.Array.indexOf(this.get("selected"),s.value)>=0)return this.close();this.select(s.value,s)},select:function(s,i,a){var l,n=this,h=s?this._items[s]:null,o=!0,c=[];h&&e.Array.indexOf(this.get("selected"),s)>=0&&(this.get("multiSelect")||this.get("multiSelectSub"))?(c=this.get("selected"),!h.sub&&this.get("multiSelect")&&c.length>this.get("minimumSelected")?(c.splice(e.Array.indexOf(this.get("selected"),s),1),o=!1):h.sub&&(c.splice(e.Array.indexOf(this.get("selected"),s),1),o=!1),this.set("selected",c)):h&&(h.sub?(c.push(s),this.get("selectParent")&&c.push(h.sub),e.Array.each(this.get("selected"),function(e){n._items[e].sub===h.sub?c.push(e):n.get("multiSelect")&&!n._items[e].sub&&c.push(e)})):this.get("multiSelect")?(c=this.get("selected")).push(s):c.push(s),this.set("selected",c)),a||this.close(),l={clicked:h?{text:h.text,value:s,sub:h.sub,itemEl:h.node,isChecked:o}:null,data:i,selections:c},this.fire("selected",l),this.update(s,l,t)},update:function(t,s,i){var a=this,l=s.clicked,n=this.get("selected"),h=this.get("defaultLabel")||"[Unable to select a default item]";this.get("staticLabel")||(this.get("labelFunction")?h=this.get("labelFunction").apply(this,[t]):l?h=s.data&&s.data.text&&s.data.text!==l.text?s.data.text:l.text:n.length>0&&a._items[n[0]]&&(h=a._items[n[0]].text),this.labelEl.set("textContent",h||"[!empty data-text!]")),this.get("container").all(i.css.items).removeClass(i.css.itemSelected),e.Array.each(n,function(e){a._items[e]&&a._items[e].node.addClass(i.css.itemSelected)})},toggle:function(e){e&&e.halt(),this._open?this.close(e):this.open(e)},open:function(e){var s=this.get("container"),i=0;this._open=!0,this.get("shouldCreateShim")&&this._shimUp(),s.removeClass(t.css.closed),this.get("autoSizeMenu")&&(i=parseInt(this.labelEl.getComputedStyle("width"),10))+30>parseInt(s.one("ul").getComputedStyle("width"),10)&&s.one("ul").setStyles({width:i+30}),e&&e.silent||this.fire("open",e);var a=s.one("span:first-child");a&&a.setAttribute("aria-expanded","true")},close:function(e){var s=this.get("container");e&&e.halt(),this._open=!1,this._shimUp(!1),this.fire("close",e),s.addClass(t.css.closed);var i=this.labelEl;i&&i.setAttribute("aria-expanded","false")},enterDropdown:function(e){e.preventDefault();var t=this.labelEl.next("ul").one("li");t&&t.focus()},keyboardNavigation:function(e){var t=e.keyCode,s=38===t||9===t&&e.shiftKey,i=40===t||9===t&&!e.shiftKey,a=e.target.ancestor("li",!0);s&&a&&a.previous("li")?(e.preventDefault(),this.focusOnPreviousItem(e)):i?(e.preventDefault(),a&&a.next("li")&&this.focusOnNextItem(e)):(27===t||s)&&(e.preventDefault(),this.labelEl&&(this.labelEl.focus(),this.close()))},focusOnPreviousItem:function(e){var t=e.target.ancestor("li",!0);if(t){var s=t.previous("li");s&&(s.one("a")?s.one("a").focus():s.focus())}},focusOnNextItem:function(e){var t=e.target.ancestor("li",!0);if(t){var s=t.next("li");s&&(s.one("a")?s.one("a").focus():s.focus())}},_shimUp:function(s){if(!1===s){if(!this._shim)return;return this._shim.detach("click").remove(),void(this._shim=null)}this._shim=e.Node.create("<div />"),this._shim.addClass(t.css.shim),this._shim.on("click",this.close.bind(this)),this.get("container").appendChild(this._shim)},disable:function(){var e=this.get("container");this.set("disabled",!0),this.close(),e.addClass(t.css.disabled),e.detach()},destructor:function(){this._shimUp(!1),this._items=null,this.labelEl=null,this.set("selected",null),this.detachAll()}},{ATTRS:{selected:{value:[]},disabled:{value:!1},hasDialogArrow:{value:!1},useCheckMarks:{value:!1},multiSelect:{value:!1},multiSelectSub:{value:!1},selectParent:{value:!0},minimumSelected:{value:0},staticLabel:{value:!1},defaultLabel:{value:!1},labelFunction:function(){},shouldCreateShim:{value:!0},autoSizeMenu:{value:!0}}})},"@VERSION@",{requires:["flickr-view"]});YUI.add("hermes-template-footer-banner",function(e,a){var t=e.Template.Handlebars.revive({1:function(e,a,t,n,r){return'<a href="https://flickr.kustomer.help/en_us/add-and-verify-a-new-email-address-ry6qhVBV" target="_blank">Update your email address to get started</a>'},3:function(e,a,t,n,r){var l;return'<a href="'+e.escapeExpression("function"==typeof(l=null!=(l=t.migrateUrl||(null!=a?a.migrateUrl:a))?l:t.helperMissing)?l.call(null!=a?a:{},{name:"migrateUrl",hash:{},data:r}):l)+'">Update your login now</a>'},compiler:[7,">= 4.0.0"],main:function(e,a,t,n,r){var l;return'<div class="footer-container login-update-banner">\n\t<div class="footer-content">\n\t\t<p>Changes are coming to the way you log into Flickr! '+(null!=(l=t.if.call(null!=a?a:{},null!=a?a.hasInvalidEmail:a,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.program(3,r,0),data:r}))?l:"")+'.</p>\n\t\t<div class="button-container">\n\t\t\t<a role="button" class="dismiss">\n\t\t\t\t<svg class="icon icon-close"><use xlink:href="#icon-close"></use></svg>\n\t\t\t</a>\n\t\t</div>\n\t\t\n\t</div>\n</div>\n'},useData:!0}),n={};e.Array.each([],function(a){var t=e.Template.get("hermes/"+a);t&&(n[a]=t)}),e.Template.register("hermes/footer-banner",function(a,r){return r=r||{},r.partials=r.partials?e.merge(n,r.partials):n,t(a,r)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("footer-banner-view",function(e,i){var t=require("hermes-core/flog")(i);e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,loadState:function(){var i=this.appContext.getViewer(),n=[];return i.signedIn?(n.push(this.appContext.getModel("person-models",i.nsid).then(function(e){this.set("isCognitoUser",e.getValue("isCognitoUser")),this.set("hasInvalidEmail",e.getValue("hasInvalidEmail")),this.set("isPro",e.getValue("isPro"))}.bind(this))),n.push(this.appContext.getModel("person-profile-models",i.nsid).then(function(e){this.set("profileModel",e)}.bind(this))),n.push(this.appContext.callAPI("flickr.people.getInfo",{user_id:i.nsid,extras:"mu"}).then(function(e){e&&e.person&&e.person.mu?(this.set("hasAuthorizedMobile",e.person.mu),t.info("User is not eligible for the migration banner (mobile user/windows uploader)")):(t.info("User is eligible for the migration banner"),this.set("hasAuthorizedMobile",!1))}.bind(this))),e.Promise.all(n)):(this.set("isCognitoUser",0),e.Promise.resolve())},buildContainer:function(){return this.canSeeBanner()?(this.set("canSeeBanner",!0),this.setContainerWithTemplate("footer-banner",{hasInvalidEmail:this.get("hasInvalidEmail"),migrateUrl:e.config.flickr.cognito.root+e.config.flickr.cognito["migration-url"]})):(this.set("canSeeBanner",!1),this.setContainerHTML("")),this},activate:function(){var e=this.get("container");this.get("canSeeBanner")?(e.addClass("with-footer-banner"),this.registerEventHandler(e.one(".dismiss").on("click",this.dismissBanner.bind(this)))):this.setContainerHTML(""),this.appContext.getCookie("cmb")&&this.appContext.removeCookie({cookieName:"cmb",path:"/"})},dismissBanner:function(i){var t=new Date;t.setTime(t.getTime()+1728e5-36e5),this.appContext.setCookie({cookieName:e.config.flickr.cognito["migration-banner-cookie-name"],cookieValue:1,expires:t,path:"/"}),this.setContainerHTML("")},canSeeBanner:function(){var i=!1;return!this.appContext.getViewer().signedIn||this.get("isCognitoUser")||this.get("hasAuthorizedMobile")||"en-US"!==this.appContext.lang||this.appContext.getCookie(e.config.flickr.cognito["migration-banner-cookie-name"])||this.isSeeingRefencingBanners()||(i=!0),i},isSeeingRefencingBanners:function(){var i=!1;return!this.get("isPro")&&(e.UserLimitsHelper.isOverARRLimit(this.get("profileModel"),this.appContext)&&!this.appContext.getCookie(e.config.flickr.upload_blocking.dismiss_over_upload_limit_message_cookie_name)?i=!0:e.UserLimitsHelper.isNearUploadLimit(this.get("profileModel"),this.appContext)&&!this.appContext.getCookie(e.config.flickr.upload_blocking.dismiss_near_upload_limit_message_cookie_name)?i=!0:e.UserLimitsHelper.isAtUploadLimit(this.get("profileModel"),this.appContext)&&!this.appContext.getCookie(e.config.flickr.upload_blocking.dismiss_at_upload_limit_message_cookie_name)&&(i=!0),i)}})},"@VERSION@",{requires:["flickr-view","user-limits-helper","hermes-template-footer-banner"],langBundles:["common","privacy","refencing-announcement"]});YUI.add("hermes-lang-privacy",function(e,n){e.Intl.add("hermes/privacy","en-US",{OATH_DATA_USAGE:["Flickr and Yahoo are now part of “Oath” and are members of the Verizon family of companies. Beginning 15 September 2017, we plan to share some user information within our new family."],SM:["Exciting news: Flickr is joining SmugMug!"]})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-lang-refencing-announcement",function(e,o){e.Intl.add("hermes/refencing-announcement","en-US",{LETS_BE_CANDID:["Let’s be candid."],FLICKR_AT_ITS_BEST:["Flickr at its best is a place to connect, to discover, and to evolve as photographers and lovers of photography. This is the world’s largest photographer-focused community. Here, together, this newly-independent community can shape the future of photography itself."],TODAY_WE_ARE_ANNOUNCING:["Today we are announcing updates to Flickr’s Pro and Free account offerings."],FLICKR_PRO_BETTER_THAN_EVER:['<span class="flickr-pro-text">Flickr Pro</span> is better than ever. For only ',"${price}",' per year, get <span class="unlimited-storage-text">unlimited storage</span>, ad-free browsing, advanced stats, an unmatched community, and more.'],UNLIMITED_STORAGE:["Unlimited Storage."],ONLY_LIMIT_IS_IMAGINATION:["The only limit is your imagination. Upload as many photos as you can take, always at true full resolution."],AD_FREE_BROWSING:["Ad-free Browsing."],FOCUS_ON_WHAT_MATTERS:["Focus on what matters. A fully ad-free Flickr experience for you and your visitors."],ADVANCED_STATS:["Advanced Stats."],SEE_WHICH_PHOTOS_ARE_TRENDING:["See which of your photos are trending now, and which have performed the best over the life of your Flickr Pro account."],PLUS_ALL_THESE_PRO_FEATURES:['Plus all these great <span class="new-text">new</span> Pro-only features.'],PREMIER_SUPPORT:["Premier Support"],PREMIER_PRODUCT_SUPPORT:["Premier Product Support"],SKIP_THE_LINE:['Skip the line. Flickr Pros now receive priority assistance from our new world-class support team. <span class="when-text">Available now.</span>'],MORE_PARTNER_DISCOUNTS:["More Partner Discounts"],SAVE_ON_PHOTOGRAPHY_ESSENTIALS:["Save on photography essentials. Discounts on Creative Cloud from Adobe, ","${smPercent}",'% off a custom portfolio site on SmugMug, gear from Peak Design, and many more. <span class="when-text">Coming November.</span>'],ADVANCED_STATS_ON_MOBILE:["Advanced Stats on Mobile"],STATS_IN_YOUR_POCKET:['Stats in your pocket. All the photo stats you know and love, available in-app. <span class="when-text">Coming November.</span>'],INCREASED_EXPOSURE:["Increased Exposure"],ALL_PROS_PRIORITY_EXPOSURE:['All Pro members as of January 1, 2019 are eligible for priority exposure in the next iteration of Explore. <span class="when-text">Coming early 2019.</span>'],NEW_5K_PHOTO_OPTION:["New 5K Photo Display Option"],LOOK_YOUR_BEST:['Look your best. Your images are beautifully optimized for any screen, from smartphone to jumbotron. Pro images display at resolutions up to 5K. <span class="when-text">Coming early 2019.</span>'],TEN_MINUTE_VIDEOS:["10 Minute Videos"],MORE_TIME_TO_TELL_STORY:['More time to tell your story. Play back videos for up to 10 minutes, increased from 3. <span class="when-text">Coming early 2019.</span>'],HANDS_DOWN_BEST_DEAL:["Hands down the best deal in photos."],BEST_DEAL_REASON:["Unlimited storage, ad-free browsing, and a global community of over 100 million photographers for less than half the cost of Apple, Amazon, or Google. Sign up today and get ","${percent}","% off the first year. Discount available through November 30."],GET_PRO_30_OFF:["Get Pro today for ","${percent}","% off"],FREE_ACCOUNTS_1000_PHOTOS:['<span class="free-accounts-text">Free accounts</span> will soon be limited to 1,000 photos or videos. Flickr isn’t Flickr without the contributions and participation of our free members, and we remain committed to a vibrant free offering.'],IF_YOU_ARE_FREE_MEMBER:["If you are a free member with more than 1,000 photos or videos, you will have ample time to upgrade to Pro (for ","${percent}",'% off your first year) or download your photos and videos.<a href="',"${url}",'" title="',"${title}",'">*</a>'],READ_MORE_ABOUT_DECISION:["Read more about this decision."],YOUR_PHOTOGRAPHY_COMMUNITY:["Your Photography Community"],SHARE_DISCOVER_GROW:["Share, discover, and grow. No matter your passion, there are photographers here who share it."],ORGANIZE_BEAUTIFULLY:["Organize Beautifully"],POWERFUL_INTUITIVE_TOOLS:["Powerful, intuitive tools to organize your photos and share them with the people who matter to you."],FREE_MEMBERS_NOTICE:["*Free members with more than 1,000 photos or videos uploaded to Flickr have until Tuesday, January 8, 2019, to upgrade to Pro or download content over the limit. After January 8, 2019, members over the limit will no longer be able to upload new photos to Flickr. After February 5, 2019, free accounts that contain over 1,000 photos or videos will have content actively deleted -- starting from oldest to newest date uploaded -- to meet the new limit."],READY_FOR_PRO:["Ready for Pro?"],NEW_PROS_RECEIVE_DISCOUNT:["New Pros receive ","${percent}","% off their first year. Discounted price available until Nov 30."],UPGRADE_TO_PRO:["Upgrade to Pro"],NEW_SIMPLE_LOGIN:["New simple login!"],COMING_IN_JANUARY_LOGIN:["Coming in January, there will be no need for a Yahoo account to use Flickr."],ANNOUNCEMENT_BANNER_ACCOUNTS_CHANGING:["Flickr’s Pro and Free account offerings are changing. See what it means for you."],SAVE_ON_PHOTOGRAPHY_ESSENTIALS_NOW:["Save on photography essentials. Discounts on Creative Cloud from Adobe, ","${smPercent}",'% off a custom portfolio site on SmugMug, gear from Peak Design, and many more. <span class="when-text">Available Now.</span>'],STATS_IN_YOUR_POCKET_NOW:['Stats in your pocket. All the photo stats you know and love, available in-app. <span class="when-text">Available Now.</span>'],BEST_DEAL_REASON_JAN:["Unlimited storage, ad-free browsing, and a global community of over 100 million photographers for less than half the cost of Apple, Amazon, or Google. Sign up today and get ","${percent}","% off the first year. Discount available through January 8."],BEST_DEAL_REASON_JAN_X:["Unlimited storage, ad-free browsing, and a global community of over 100 million photographers for less than half the cost of Apple, Amazon, or Google. Sign up today and get ","${percent}","% off the first year. Discount available through January ","${dateNumber}","."],NEW_PROS_RECEIVE_DISCOUNT_JAN:["New Pros receive ","${percent}","% off their first year. Discounted price available until January 8."],NEW_PROS_RECEIVE_DISCOUNT_JAN_X:["New Pros receive ","${percent}","% off their first year. Discounted price available until January ","${dateNumber}","."],WE_ARE_ANNOUNCING:["We are announcing updates to Flickr’s Pro and Free account offerings."],ALL_PROS_PRIORITY_EXPOSURE_2:["All Pro members are eligible for priority exposure in the next iteration of Explore. Coming early 2019."],BEST_DEAL_REASON_2:["Unlimited storage, ad-free browsing, and a global community of more than 100 million photographers for less than half the cost of Apple, Amazon, or Google."],GET_PRO_TODAY:["Get Pro today"],IF_YOU_ARE_FREE_MEMBER_2:["If you are a free member with more than ","${limitCount}"," photos or videos, you will have ample time to upgrade to Pro or download your photos and videos.*"],FREE_MEMBERS_NOTICE_2:["*Free members with more than ","${limitCount}"," photos or videos uploaded to Flickr have until Tuesday, January 8, 2019, to upgrade to Pro or download content over the limit. After January 8, 2019, members over the limit will no longer be able to upload new photos to Flickr. On February 5, 2019, photos and videos over the free account ","${limitCount}"," item limit will be at risk of deletion beginning with the oldest photos and videos."],JOIN_LARGEST_COMMUNITY:["Join the largest, most influential group of photographers on the planet, and find your community today."],COMING_SOON_LOGIN:["Coming soon, there will be no need for a Yahoo account to use Flickr."],ALL_PROS_PRIORITY_EXPOSURE_3:["All Pro members are eligible for priority exposure in the next iteration of Explore."],COMING_LATE_2019:["Coming late 2019."]})},"@VERSION@",{requires:["intl"]});YUI.add("footer-full-view",function(t){var e=["en-US","zh-HK","de-DE","es-US","fr-FR","ko-KR","it-IT","pt-BR","vn-VN","id-ID"],n={"en-US":"English","de-DE":"Deutsch","es-US":"Español","fr-FR":"Français","ko-KR":"한글","it-IT":"Italiano","pt-BR":"Português","vn-VN":"Tiếng Việt","id-ID":"Bahasa Indonesia","zh-HK":"繁體中文"};t.FlickrView.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return""===this.get("container").get("innerHTML")&&this.setContainerHTML('<div class="footer-full-content"></div>'),this.appStateParams=t,this},loadState:function(){var o,a,s;for(s=this.appContext.auth&&this.appContext.auth.csrf?this.appContext.auth.csrf:"",this.lang=this.appContext.lang,this.menuLangs=[],"zh-Hant-HK"===this.lang&&(this.lang="zh-HK"),"vi-vn"===this.lang.toLowerCase()&&(this.lang="vn-VN"),this.selectedLang={code:this.lang,name:n[this.lang],csrf:s},o=0,a=e.length;o<a;o++)e[o]!==this.lang&&"string"==typeof e[o]&&this.menuLangs.push({code:e[o].toLowerCase(),name:n[e[o]],csrf:s});return t.Promise.resolve()},buildContainer:function(){var e={};return this.get("viewer")&&t.merge(this.get("viewer").toJSON(),{urls:t.URLHelper.generatePersonUrls(this.get("viewer"))}),(e={displayLangs:this.displayLangs,selectedLang:this.selectedLang,helpLocaleKey:this.selectedLang.code.replace("-","_")||"en_US",menuLangs:this.menuLangs,elements:this.setElementStates(),adobeAnalyticsUrl:t.config.flickr.adobe.analytics.url}).elements.bottom_row||this.get("container").addClass("compact"),YUI.Env.isServer?e.pageUrl=this.appContext.request.url:e.pageUrl=window.location.pathname,this.setContainerWithTemplate("footer-full",e),this},activate:function(){var e=this.get("container").one(".lang-switcher"),n=e.one("a");return this.menuLangsFormatted=this.menuLangs.map(function(t){return{href:"/change_language.gne?lang="+t.code+"&csrf="+t.csrf,text:t.name}}),this.registerEventHandler(e.on("click",function(o){o.preventDefault(),n.addClass("dimmed");var a=new t.Views.FluidDroparound({anchorOffsetHorizontal:15,appContext:this.appContext,showDropArrow:!0,observePageResize:!0,dismissOnOverlayClick:!0,anchorElement:e.one(".arrow"),classList:["lang-droparound"],menuItems:this.menuLangsFormatted});a.show(),this.registerEventHandler(a.on("closeDroparound",function(t){n.removeClass("dimmed")}),this)},this)),this},setElementStates:function(){var t={top_row:!0,top_about:!0,top_jobs:!0,top_blog:!0,top_developers:!0,top_guidelines:!0,top_privacy:!1,top_terms:!1,top_report_abuse:!0,top_help:!1,top_help_forum:!0,top_language:!0,bottom_row:!0,bottom_privacy:!0,bottom_terms:!0,bottom_help:!0,bottom_yahoo_company:!1,bottom_tumblr:!0,bottom_facebook:!0,bottom_twitter:!0};return this.appContext.flipper.isFlipped("relocate-footer-help-button")&&(t.top_help=!0,t.bottom_help=!1),this.appStateParams.isSOHP&&(t.top_privacy=!0,t.top_terms=!0,t.top_report_abuse=!1,t.bottom_row=!1),t}})},"@VERSION@",{requires:["flickr-view","hermes-template-footer-full","url-helper","dropdown","footer-banner-view","fluid-droparound-view"],langBundles:["common"]});YUI.add("album-page-view",function(e,t){var i=require("hermes-core/flog")(t);e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.albumId=e.albumId,this.isOwner=e.isOwner,this.isTwitterbot=e.isTwitterbot,this.albumPhotoListLayoutStyle=e.albumPhotoListLayoutStyle,e.id=e.albumId,e.modelRegistryName="set-models",e.maxNumAttrName="totalCount",this.pageParams=e.pageParams,e.photoListConfig={modelParams:{registryName:"set-models",modelIdOrAttributes:e.albumId,collectionAttributeName:"photoPageList"},parentName:this.name,pageParams:e.pageParams,contextSuffix:"album-"+e.albumId,measureAFT:!0,maintainScrollPosition:!1,scrollToWithId:e.withPhotoId},e.photoListConfig.layout={targetRowHeight:"justified"===this.albumPhotoListLayoutStyle?190:430,fullWidthBreakoutRowCadence:"justified"===this.albumPhotoListLayoutStyle?null:3,awakeBoundsToViewportSizeRatio:5,containerPadding:{top:4,right:0,bottom:4,left:0},itemSpacing:{horizontal:4,vertical:4}},this},subviewConfig:{"global-nav-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"album-toolbar-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"album-header-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"photo-list-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"pagination-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0,disabled:function(){return!this.pageParams.viewPageSize}},"signup-footer-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"footer-full-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0}},loadState:function(){var e=this;return this.appContext.getModel("set-models",this.albumId).then(function(t){e.set("albumModel",t)})},buildContainer:function(){return this.setContainerWithTemplate("album-page"),this},buildHeadContainer:function(){var t,a,o,r,l=this.get("albumModel"),s=l.getValue("photoPageList").getList(),n="summary",u=[],h=(this.pageParams.nominalPage-1)*this.pageParams.viewPageSizeForShare||0;if(this.isTwitterbot&&s.length-h>=4)for(n="gallery",o=0;o<Math.min(s.length-h,4);o++)if(s[h+o]){var m=s[h+o].getSizeToFit({width:640,height:640});m&&m.url&&u.push({property:"twitter:image"+o,content:m.url})}else i.error("Missing album photo in album list",{index:h+o});l.registry?t=l.registry.getSizeToFit(this.albumId,{width:640,height:640}):i.error("Missing album model registry"),r=l.getValue("url").replace(/\/albums\/([0-9]+)/i,"/sets/$1"),a=this.templates("dynamic-page-head")({title:l.getValue("title"),description:l.getValue("description")||this.intlMessage({intlName:"album-page.OPENGRAPH_DESCRIPTION",owner:l.getValue("owner").getValue("displayname")}),url:l.getValue("url"),fullURL:e.url(r),openGraphImageURL:t?e.URLHelper.addProtocolToURL(t.url):"",openGraphaImageWidth:t?t.width:"",openGraphaImageHeight:t?t.height:"",ownerURL:l.getValue("owner").getValue("url"),twitterCardType:n,twitterImages:u,ogType:"article",domain:e.url(),feeds:[{title:this.intlMessage({intlName:"meta.ALBUM_ATOM_TITLE",username:l.getValue("owner").getValue("displayname"),albumTitle:l.getValue("title")}),url:"/services/feeds/photoset.gne?nsid="+l.getValue("owner").getValue("nsid")+"&set="+l.getValue("id")+"&lang="+this.appContext.lang.toLowerCase()+"&format=atom"}]}),a+=this.templates("head-meta")({isName:!0,metaName:"robots",metaValue:"noarchive"}),a+=this.templates("head-meta")({isName:!0,metaName:"viewport",metaValue:"width=device-width, viewport-fit=cover, initial-scale=1, maximum-scale=1"}),a+=this.templates("head-meta")({isName:!0,metaName:"googlebot",metaValue:"noarchive"}),YUI.Env.isServer?this.set("headContainer",a):(this.set("headContainer",a.concat(this.subviews["pagination-view"].get("headContainer"))),this.updateHead())},activate:function(){var t=this,i=this.get("albumModel"),a=i.getValue("isOwner");return e.later(100,this,function(){e.use("photo-page-scrappy-view")}),e.on("albumToolbarView:layoutChange",function(e){var i=t.subviews["photo-list-view"],a=i.photoListLayout;a.targetRowHeight="justified"===e?190:430,a.fullWidthBreakoutRowCadence="justified"===e?null:3,i.setItems(t.get("albumModel").getValue("photoPageList").getList())}),a||this.appContext.getViewCounter().recordAlbumView({albumOwnerID:i.getValue("owner").getValue("id"),albumID:i.getValue("id"),referrer:this.appContext.getReferrer()}),this},onSubviewEvent:function(e,t){t&&"newPhotoAddedToAlbum"===t[0]&&this.subviews["photo-list-view"].setItems(this.get("albumModel").getValue("photoPageList").getList())},getTrackingSegments:function(){return{couldHaveSeenAd:!this.get("albumModel").getValue("owner").getValue("isPro")&&!this.appContext.getViewer().isPro,vwrOwner:this.isOwner?1:0}}},{ATTRS:{spaceid:{value:792600538}}})},"@VERSION@",{requires:["flutil","flickr-view","flickr-promise","set-models","hermes-template-album-page","hermes-template-dynamic-page-head","hermes-template-head-meta","hermes-template-head-link","album-toolbar-view","album-header-view","photo-list-view","footer-full-view","url-helper"],langBundles:["album-page","meta"]});YUI.add("album-privacy-models",function(t){function e(t){e.superclass.constructor.call(this,t)}t.Models[this.name]=e,t.extend(e,t.FlickrModelRegistry,{name:this.name,remote:{read:function(e){return t.ListFetchers["flickr-photosets-getPhotos"].run(e,this.appContext)}},attributes:{totalCount:{validator:function(e){return t.AttributeHelpers.validateInteger(e)},setter:function(e){return t.AttributeHelpers.coerceInteger(e)},defaultValue:0},hasPhotosPrivate:{readOnly:!0,derivedBy:["totalCount","countPhotosPublic"],defaultFn:function(t){return this.getValue(t,"totalCount")-this.getValue(t,"countPhotosPublic")}},countPhotosFamily:{validator:function(e){return t.AttributeHelpers.validateInteger(e)},setter:function(e){return t.AttributeHelpers.coerceInteger(e)},defaultValue:0},countPhotosFriend:{validator:function(e){return t.AttributeHelpers.validateInteger(e)},setter:function(e){return t.AttributeHelpers.coerceInteger(e)},defaultValue:0},countPhotosFriendFamily:{validator:function(e){return t.AttributeHelpers.validateInteger(e)},setter:function(e){return t.AttributeHelpers.coerceInteger(e)},defaultValue:0},countPhotosPublic:{validator:function(e){return t.AttributeHelpers.validateInteger(e)},setter:function(e){return t.AttributeHelpers.coerceInteger(e)},defaultValue:0}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-photosets-getPhotos-fetcher"]});YUI.add("hermes-lang-meta",function(e,o){e.Intl.add("hermes/meta","en-US",{PHOTOSTREAM:["Explore ","${username}","'s ",{type:"plural",valueName:"photoCount",options:{one:"photo on Flickr!",other:"${#} photos on Flickr!"}}],PHOTOSTREAM_NO_PHOTOS:["Explore ","${username}","'s photos on Flickr!"],ALBUMS_LIST:["Explore ","${username}","'s ",{type:"plural",valueName:"photoCount",options:{one:"album on Flickr!",other:"${#} albums on Flickr!"}}],ALBUMS_LIST_NO_ALBUMS:["Explore ","${username}","'s albums on Flickr!"],FAVORITES:["Explore ","${username}","'s ",{type:"plural",valueName:"photoCount",options:{one:"favorites on Flickr!",other:"${#} favorites on Flickr!"}}],FAVORITES_NO_PHOTOS:["Explore ","${username}","'s favorites on Flickr!"],META_DESCRIPTION_BY_USER_ON_FLICKR:["By ","${username}"," on Flickr"],PHOTOSTREAM_ATOM_TITLE:["Flickr: ","${username}","'s Photostream Atom feed"],FAVORITES_ATOM_TITLE:["Flickr: ","${username}","'s Favorites Atom feed"],GROUP_POOL_ATOM_TITLE:["Flickr: ","${groupName}","'s Photos Atom feed"],GROUP_DISCUSSIONS_ATOM_TITLE:["Flickr: ","${groupName}","'s Discussions Atom feed"],ALBUM_ATOM_TITLE:["Flickr: ","${username}","'s \"","${albumTitle}",'" Atom feed']})},"@VERSION@",{requires:["intl"]});